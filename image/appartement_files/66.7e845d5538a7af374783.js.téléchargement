(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[66],{"/80F":function(e,t,n){"use strict";var c=n("63Ad"),a=n("e+GP");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SearchStar=void 0;var r=c(n("OvAC")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var c={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!=s&&Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(c,s,o):c[s]=e[s]}return c.default=e,n&&n.set(e,c),c}(n("mXGw")),o=n("/m4v"),i=n("e82J"),l=n("i4Ik"),u=n("qtVV"),d=n("vDT4");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function p(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?f(Object(t),!0).forEach((function(n){(0,r.default)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var m=function(e){var t=e.criterias,n=e.tracking,c=e.BFF_URI,a=e.searchFeaturedItems,r=e.dispatch,o=(0,s.useMemo)((function(){return{type:"product",description:"impression",infos:"search_results-stars",products:[]}}),[]),h=(0,d.useThorEvent)({eventData:p(p({},o),{},{products:[]})}),f=a[(0,s.useMemo)((function(){return(0,i.criteriasToID)({localities:t.localities,idtypebien:t.idtypebien})}),[t])]||[],m=(0,s.useMemo)((function(){return f.length?f.map((function(e){return e.programId})):[]}),[f]),b=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=[];return m.forEach((function(c){(n[c]||e[c])&&t.push((0,l.mapTrackingProduct)({name:"search_results-stars",position:t.length,rawTracking:n[c]||e[c]}))})),t};return(0,s.useEffect)((function(){if(null!==f&&void 0!==f&&f.length){var e=m.filter((function(e){return"undefined"!=typeof n[e]}));m.length===e.length?h({eventData:p(p({},o),{},{products:b()})}):(0,u.trackingProgramAPI)({host:c,args:m.filter((function(e){return!n[e]})),onSuccess:function(e){r({action:"TRACKING",type:"TRACKING_ADD_PROGRAMS",payload:e}),h({eventData:p(p({},o),{},{products:b(e)})})},onError:function(e){throw e}})}}),[a]),s.default.createElement(s.default.Fragment,null)};t.SearchStar=m;var b=(0,o.connect)((function(e){var t=e.criterias,n=e.searchFeaturedItems;return{criterias:t,tracking:e.tracking.programs,searchFeaturedItems:n,BFF_URI:e.config.BFF_URI}}))(m);t.default=b},Ln5B:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchStar",(function(){return Q}));var c=n("mXGw"),a=n("/m4v"),r=n("Gj3y"),s=n("Sh+t"),o=n("V1hy"),i=n("CdHe"),l=n("eHSK"),u=n("Nl+n"),d=n("91mD"),h=n("Acgd"),f=n("DTV4"),p=n("UutA"),m=p.default.article.withConfig({componentId:"sc-1t08kwk-0"})(["width:100%;cursor:pointer;:hover{.annoncePushWrap{box-shadow:",";}}"],u.a),b=p.default.div.withConfig({componentId:"sc-1t08kwk-1"})(["position:relative;display:flex;flex-direction:column;width:100%;max-width:",";height:",";background-color:",";border-radius:",";box-shadow:",";overflow:hidden;transition:0.3s box-shadow;@media screen and (min-width:",") and (max-width:","){padding:calc("," / 2);}"],h.n,h.m,f.a.white,l.c,u.e,i.b,i.c,o.b),j=p.default.span.withConfig({componentId:"sc-1t08kwk-2"})(["position:absolute;top:calc("," / 2);left:calc("," / 2);z-index:20;"],o.b,o.b),g=p.default.span.withConfig({componentId:"sc-1t08kwk-3"})(["display:block;height:100%;background-size:cover;background-position:center;"]),O=p.default.div.withConfig({componentId:"sc-1t08kwk-4"})(["position:relative;height:",";"],h.l),w=p.default.div.withConfig({componentId:"sc-1t08kwk-5"})([""]),y=p.default.div.withConfig({componentId:"sc-1t08kwk-6"})(["display:flex;flex-direction:column;justify-content:center;padding:calc("," / 2) ",";.annoncePriceNumber{font-weight:",";}"],o.b,o.b,d.a),x=p.default.span.withConfig({componentId:"sc-1t08kwk-7"})([""]),I=p.default.div.withConfig({componentId:"sc-1t08kwk-8"})(["color:",";"],f.a.greyLight),P=p.default.h2.withConfig({componentId:"sc-1t08kwk-9"})(["color:",";"],f.a.greyDark),v=p.default.a.withConfig({componentId:"sc-1t08kwk-10"})([""]),k=p.default.p.withConfig({componentId:"sc-1t08kwk-11"})(["color:",";"],f.a.grey),_=n("oYCi"),N=function(e){return Object(_.jsx)(m,{className:"annoncePush",onClick:function(){return window.open(e.annonce.programUrl)},children:Object(_.jsxs)(b,{className:"annoncePushWrap",children:[e.annonce.hasSpecialOffer&&Object(_.jsx)(j,{className:"stamp stampLight stampPink",children:"Offre"}),Object(_.jsxs)(O,{className:"annoncePushCover",children:[Object(_.jsx)(s.b,{src:e.annonce.urlCover,default:r.DEFAULT_THUMB,threshold:.3,children:Object(_.jsx)(g,{className:"annoncePushCoverSample"})}),Object(_.jsx)(x,{className:"spinner"})]}),Object(_.jsx)(w,{children:Object(_.jsxs)(y,{className:"annoncePushInfosWrap",children:[Object(_.jsx)(I,{"data-testid":"annoncePushInfos-sponsor",className:"summary12",children:"Sponsoris\xe9"}),Object(_.jsx)(P,{className:"annoncePushInfosTitle summary16 fwSemBold",title:e.annonce.name,children:Object(_.jsx)(v,{"data-testid":"wrapText-link",className:"wrapText",href:e.annonce.programUrl,target:"_blank",children:e.annonce.name})}),e.annonce.cityName&&Object(_.jsx)(k,{"data-testid":"annoncePushInfos-City",className:"annoncePushInfosCity summary14 wrapText",title:e.annonce.cityName,children:e.annonce.cityName})]})})]})})},C=n("C2k5"),S=Object(p.default)(m).withConfig({componentId:"sc-1yptuwy-0"})(["width:100%;cursor:pointer;"]),E=p.default.span.withConfig({componentId:"sc-1yptuwy-1"})(["top:0;right:0;bottom:0;left:0;position:absolute;background-size:cover;"]),T=p.default.span.withConfig({componentId:"sc-1yptuwy-2"})(["top:0.7rem;right:0;position:absolute;width:calc(178px / 2);height:calc(190px / 2);background-size:cover;"]),A=p.default.a.withConfig({componentId:"sc-1yptuwy-3"})(["display:block;height:100%;background-size:cover;background-position:center;"]),F=function(){return Object(_.jsx)(S,{className:"annoncePush pushApp",children:Object(_.jsxs)(b,{className:"annoncePushWrap",children:[Object(_.jsxs)(O,{className:"annoncePushCover",children:[Object(_.jsx)(s.b,{src:r.APPLI_PUSH_COVER_BG,default:r.DEFAULT_THUMB,children:Object(_.jsx)(E,{className:"annoncePushCoverBG"})}),Object(_.jsx)(s.b,{src:r.APPLI_PUSH_COVER_PHONE,default:r.DEFAULT_THUMB,children:Object(_.jsx)(T,{className:"annoncePushCoverPhone"})}),Object(_.jsx)(A,{className:"annoncePushCoverSample",href:C.SLN_APPLICATION_PAGE_URL,target:"_blank"}),Object(_.jsx)(x,{className:"spinner"})]}),Object(_.jsx)(w,{className:"annoncePushInfos",children:Object(_.jsxs)(y,{className:"annoncePushInfosWrap",children:[Object(_.jsx)(I,{className:"summary12",children:"Sponsoris\xe9"}),Object(_.jsx)(v,{className:"annoncePushInfosTitle summary16 fwSemBold wrapText",href:C.SLN_APPLICATION_PAGE_URL,target:"_blank",children:"L'application"}),Object(_.jsx)(v,{className:"annoncePushInfosCity summary14 wrapText",href:C.SLN_APPLICATION_PAGE_URL,target:"_blank",children:"IOS"})]})})]})})},D=n("vaED"),L=n("VrFA"),U=Object(p.default)(m).withConfig({componentId:"sc-1fdwxue-0"})(["width:100%;cursor:pointer;position:relative;.svg{position:absolute;right:calc("," / 1.5);bottom:calc("," / 1.5);width:1.5rem;height:1.5rem;fill:url(#svgAdd_grad);}"],o.b,o.b),R=p.default.div.withConfig({componentId:"sc-1fdwxue-1"})(["display:flex;flex-direction:column;justify-content:center;height:100%;padding:"," calc("," / 1.5);.annoncePriceNumber{font-weight:600;}"],o.b,o.b),M=p.default.a.withConfig({componentId:"sc-1fdwxue-2"})(["color:",";margin-bottom:calc("," / 2);"],f.a.greyDark,o.b),B=p.default.a.withConfig({componentId:"sc-1fdwxue-3"})(["color:",";font-size:1.16667rem;line-height:1.5rem;font-family:",";"],f.a.grey,L.a),G=function(){return Object(_.jsxs)(U,{className:"annoncePush pushMea",children:[Object(_.jsx)(b,{className:"annoncePushWrap",children:Object(_.jsx)(w,{className:"annoncePushInfos",children:Object(_.jsxs)(R,{className:"annoncePushInfosWrap",children:[Object(_.jsx)(M,{className:"annoncePushInfosTitle summary16 fwSemBold",href:C.SLN_MEA_OFFER_VEDETTE_URL,target:"_blank",children:"Votre\xa0annonce\xa0ici"}),Object(_.jsxs)(B,{className:"annoncePushInfosCity",href:C.SLN_MEA_OFFER_VEDETTE_URL,target:"_blank",children:["Diffusez votre annonce ",Object(_.jsx)("br",{}),"sur des communes ",Object(_.jsx)("br",{}),"limitrophes ou similaires"]})]})})}),Object(_.jsx)(D.a,{})]})},V=n("/80F"),W=n.n(V),H=n("TeuZ"),z=n.n(H),K=n("qtVV"),J=n("Xp8U"),X=(n("2EQb"),n("e82J")),q=function(e){return Object(c.useMemo)((function(){return function(e){var t=e.localities,n=e.idtypebien;return Object(X.criteriasToID)({localities:t,idtypebien:n})}(e)}),[e.localities,e.idtypebien])},Q=function(e){var t=e.criterias,n=e.searchFeaturedItems,a=e.BFF_URI,r=e.dispatch,s=q(t),o=n[s],i=Array.isArray(o),l=i&&!!o.length,u=Object(c.useCallback)((function(){!i&&t.localities.length&&Object(K.vedettesAPI)({host:a,args:t,onSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r({action:J.Keys.SearchFeaturedItems,type:"UPDATE_SEARCH_FEATURED_ITEMS",payload:{annonces:e,searchFeaturedKey:s}})}})}),[i,t,s]);return Object(c.useEffect)(u,[t]),Object(_.jsx)("div",{className:"searchStar ".concat(l?"_show":""),children:Object(_.jsx)("div",{className:"searchStarWrap",children:l&&Object(_.jsxs)("div",{className:"searchStarList",children:[Object(_.jsxs)("ul",{className:"searchStarListWrap",children:[!!o&&o.map((function(e,t){return Object(_.jsx)(z.a,{className:"searchStarListItem",htmlTag:"li",productId:e.programId,position:t,infos:"search_results-stars",children:Object(_.jsx)(N,{annonce:e})},e.programId)})),o.length<=2&&o.length>0&&Object(_.jsx)("li",{className:"searchStarListItem",children:Object(_.jsx)(F,{})}),1===o.length&&Object(_.jsx)("li",{className:"searchStarListItem",children:Object(_.jsx)(G,{})})]}),Object(_.jsx)(W.a,{})]})})})};t.default=Object(a.connect)((function(e){return{criterias:e.criterias,searchFeaturedItems:e.searchFeaturedItems,BFF_URI:e.config.BFF_URI}}))(Q)}}]);